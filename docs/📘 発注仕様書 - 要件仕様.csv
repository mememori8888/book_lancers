要件仕様,,,,
NO,仕様分類,機能,詳細,目的・アウトプット
1,機能,メール処理,"・メール本文内の受注商品コードを解析。【製作用メールパターンは発生者側で用意】
例：1234567891234SAN→「SAN」より前の文字(13桁or5桁)を読み取る",・JAN(ISBN)・ASINコードを取得
2,機能,自家在庫照合 ,"・事前に列「ISBN・ASINコード」だけのCSVを【製作用cscは発生者側で用意】
　読み込みNO1で処理したコードと照合","・該当しない場合はNO3へ
・該当する場合は「自家在庫有り」を処理台帳に表示"
3,機能,スクレイピング処理,"・スクレイピング用URLの決定方法
　下記の①②はコントロールパネルより切替操作。
　   【案】③の場合は識別する文字をコントロールパネルで登録操作
　機能①各サイトの商品ページのURLに組み込んで表示【製作用URLパターンは発生者側で用意】
　機能②事前に列「ISBN・ASINコード」「URL」だけのCSVを読み込み、NO1で処理したコードと照合
　　【案】③受注商品コードの末尾の文字で①か②を判別して表示

・在庫情報を各ECサイトから取得。
　HTML変更対策としてブラウザ上の全HTMLを読み取り、列ごとにパターン属性をコントロールパネルで設定。
　HTML変更で情報や位置が変わっても付与するパターン属性を都度変更することで変化に対応。
　但し丸善ジュンク堂書店-店頭在庫情報だけは位置の特定が必要の可能性あり。
　【製作用属性パターンは発生者側で用意】","・在庫情報の取得。
　＜取得例＞
　・ECサイトA　1234567891234 　在庫〇　在庫△　在庫✕
　・ECサイトB　1234567891234 　在庫有り　在庫取り寄せ　在庫なし
　・ECサイトC　1234567891234 　　〇在庫　✕在庫
"
4,機能,在庫判定と振分処理,"・No３での取得結果に対し、各在庫有無を判定、優先順位に従い各ECサイトに振分
　＊在庫判定、優先順位は各サイトごとにコントロールパネルで設定。【製作用在庫表示パターンは発生者側で用意】　
　＊この時点でどこにも在庫が無い場合はその旨処理台帳に表示。
　＊優先順位について
　原則：①保留金額が1円以上ある仕入先で金額が一番大きい順に振分
　　　　②①が無い場合は単純なサイト・店舗間での優先順位に基づいて振分
　","・在庫有りの場合は仕入先の決定
・在庫無しの場合は処理台帳への表示"
5,機能,台帳上のEC及び店頭在庫保留,"・NO4の振分先決定を元に以下を判断　
保留：設定金額まで保留、到達後に再スクレピングで在庫確認の上仕入台帳に反映。完了後に仕入台帳反映
 　　　＊再スクレイピングで在庫が無い場合は保留を解除し、その旨処理台帳に表示。
　 　　 ＊特定実店舗は自動発注メールを送信。その他の店舗は手動で電話連絡扱い。
　　　　","最終的な本ツールの目的である以下を行う。
・保留処理
・店舗向け注文メール送信処理"
6,環境,リアルタイムの閲覧,"・24時間稼働のローカルPC上でツール稼働。管理画面はone-driveやシェアポイント上で閲覧・操作(範囲は相談)
  【案】サーバー上",・外部PC環境でのツール状況の把握
7,管理,"＜処理台帳＞と＜仕入台帳＞
　＊台帳３種→２種に統合","・処理台帳（案件単位管理)
　①受信項目(メール解析結果の表示)
　   表示項目：宛名/受信日/送信元/管理番号/商品CD/記載品名/記載金額/状態表示
　②最新在庫情報(スクレピング結果の表示)
　　表示項目：発注・保留予定仕入先/在庫無し	
　③処理結果(店頭保留結果の表示)
　　表示項目：店舗名/発注・保留仕入先/	発注・保留開始日/発生先での品名/税込金額/状態表示/
　＊手動で処理台帳から削除できること。
・仕入台帳(仕入単位管理)
　　表示項目：店舗名/仕入NO(仕入毎)/仕入状態/保留金額合計/最初の保留からの経過日数/保留件数/
　　　　　　　商品名/金額/経過日数/CD
　【処理台帳及び仕入台帳案のブラッシュアップは発生者側で作業】",・受注から続く仕入状況の見える化
8,管理,コントロールパネル（設定変更機能）,"各機能別でコントロールパネルでの設定項目
NO1：メール処理の設定
　・抽出キー(複数)の設定(指定指定文字前の文字or数字抽出)
NO2：自家在庫照合の設定
　・csvの読み込みのみ
NO3：スクレイピングの設定
　・属性指定：抽出したHTMLに「在庫情報」のパターン属性を付与
　・サイト別スクレイピング対象ON/OFF機能
NO4：在庫判定と振分処理の設定
　・在庫表記の登録
　・優先順位の登録
No5：自動発注と店頭保留の設定
　・サイト別ログイン情報(IDとPW)　【製作用の各サイトID及びパスワードは発生者側で用意】
　・サイト別自動発注のON/OFF機能
　・(店頭サイトのみ)自動発注メールON/OFF機能
　・保留条件の設定機能
　　項目：保留上限金額/上限日数/制限単価(高額品の除外)
　・処理履歴ダウンロード機能(日付範囲指定)
　・テスト検証機能（ダミー実行）
　　実際の発注を行わずに全フローをシミュレート
　・エラー再チェック機能
　【コントロールパネル案のブラッシュアップは発生者側で作業】",・ツール全体の設定