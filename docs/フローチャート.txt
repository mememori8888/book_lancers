1. メール処理・案件の自動リスト化 (Action 1)
メールを受信し、設定されたパターンに基づいて自動でリスト化を行う工程です。

自動処理内容:

読取対象メール（送信元）の追加 

キーとなるアドレスと抽出情報（属性）のパターン化 

商品番号の特定桁数（13桁または10桁）の抜き取り 

スクレイピング用の商品別URL作成 

処理台帳への自動反映 

2. スクレイピング処理 (Action 2)
リスト化された案件に対し、各サイトから情報を抽出する工程です。

事前設定:

コントロールパネルにて、仕入先別の属性（EC、店頭）、スクレイピング順序、在庫表記の処理方針を定義 

実行内容:

パターン1〜3（ECサイト1〜3）およびパターン4（店頭1）に対してスクレイピングを実施 

結果は自動で仕入台帳に反映される 

3. 振り分け処理 (Action 3)
スクレイピング結果と事前設定に基づき、在庫状況に応じた振り分けを行います。

在庫状況による分岐:


ECに在庫あり: 優先順位に基づき仕入先ECサイトを確定し、注文保留上限まで保管 


店頭に在庫あり: 優先順位に基づき仕入先店舗を確定し、注文保留上限まで保管 


双方在庫なし: その後の処理（削除等）へ 

管理設定:

注文保留上限額の設定 

サイト別・店舗別の発注優先順位の設定 

4. 自動発注・自動メール・自動台帳他 (Action 4〜6)
確定した案件に対して、具体的な仕入れ・発注アクションを行います。


Action 4 (自動): ログイン・自動仕入れの実行 


Action 5 (手動): 台帳化および店頭への電話対応 


Action 6 (自動): 店頭発注メールの送信 


その他: 完了案件は自動で完了台帳へ反映され、処理履歴のダウンロードが可能 

5. 現状の課題と統計項目
運用上の不明点や、管理画面で表示すべき統計項目です。

主な課題:

保留金額をキーとした振り分けの可否（例：優先度が低くても上限に近い店舗へ割り振る等） 

複数注文の同時カート入れ（発注は1つにまとめる）の制御 

保留中に在庫がなくなった場合の扱い 

クレジットカード認証への対応 

仕様変更等で抽出できなかったパターンの扱い 

統計表示項目:

スクレイピング前後の案件数およびエラー数 

EC/店頭別の保留件数・総額・最長保留期間 

振り分け先（在庫なし）の件数